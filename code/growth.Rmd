---
title: 'Lab Report: Bike-Sharing Data Analysis'
subtitle: "MA 575 Fall 2021 - C3 Team #2"
author: "Ali Taqi, Hsin-Chang Lin, Huiru Yang, Ryan Mahoney, Yulin Li"
date: "12/01/2021"
output: 
  pdf_document: 
    number_sections: true
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, fig.align = "center", fig.height = 4, fig.width = 6)
#==============================#
#       Import Libraries       #
#==============================#
library(tidyverse)
library(GGally)
library(cowplot)
library(gglm)
library(moderndive)
#==============================#
#        Global Settings       #
#==============================#
# Center ggplot titles
theme_update(plot.title = element_text(hjust = 0.5))
#=============================#
#        Obtain Dataset       #
#=============================#
# Source the wrangling scripts
source(file = "../R/wrangle-lynne.R")
# Import and wrangle data
bike_day <- read.csv("../data/bike-day.csv", header = T)
# Use the wrangling "wrapper" function to clean the data (fxn sourced from wrangle.R)
data <- wrangle_init(bike_day)
# Partition the 2011/2012 data
data2011 <- in_2011(data); data2012 <- in_2012(data)
#============================#
#       Source Scripts       #
#============================#
# Import any models (and fitted values, if applicable)
source(file = "../R/model-lynne.R")
# Import any plots or plot wrapper functions
source(file = "../R/plot.R")
source(file = "../R/plot-lynne.R")
```

```{r}

```


```{r}
local_cnt_avg <- function(i, w){
  data
}
```

```{r}
wrapped_ratio <- function(var){
  var_col <- data2011[[var]]
  var_col[1]/var_col[nrow(data2011)]
}
```


```{r}
data2011$cnt[1]/data2011$cnt[nrow(data2011)]
```

```{r}
reg <- wrapped_ratio("registered")
cas <- wrapped_ratio("casual")
tot <- wrapped_ratio("cnt")
k <- (mean(data2011$registered)/mean(data2011$cnt))
g <- k * reg + (1-k) * cas
```

```{r}
# Use casual instead of rehistered, argue it captures egenral interest better
# all registered users were once causal users but not all casual users will become registered users.
# Subset or containment
```

